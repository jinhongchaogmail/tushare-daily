2025-12-02 17:46:50,549 - [RecursiveOptimizer] - INFO - Initiating Recursive Optimization Loop: Cycle 1
2025-12-02 17:46:50,549 - [RecursiveOptimizer] - INFO - === Starting Cycle 1 ===
--- 引导程序: 检查并安装依赖 (v12.1 - Colab 优化模式) ---
检测到环境: LOCAL
使用虚拟环境 Python 作为 pip: /home/jin/.venv/bin/python

【步骤 1/3】: 检查所有必需的包...

【步骤 2/3】: 所有包均已存在。
【步骤 3/3】: 跳过安装。

【信息】:所有依赖已成功加载。
✓ 已选择中文字体: AR PL UMing CN
✓ 配置文件加载成功: /home/jin/work/training/config.yaml

--- 步骤 1: 自动环境检测与路径配置 ---
检测到环境: LOCAL
BASE_DIR: /home/jin/work
ARCHIVE_PATH: /home/jin/work/parquet-data.tar.gz
GDRIVE_BASE_PATH: /home/jin/work
DATA_DIR: /home/jin/work/data/

--- 训练模式配置 (v20) ---
结果存储根目录: /home/jin/work/optuna_results
请选择模式:
  [n] 新训练 (New)      - 创建带时间戳的新目录 (例如 run_2023...)
  [c] 继续训练 (Continue) - 选择已有目录继续优化
请输入模式 (n/c) [默认 n]: >> 已创建新训练目录: run_20251202_174653
本次运行结果将保存至: /home/jin/work/optuna_results/run_20251202_174653
检查缓存文件: /home/jin/work/feature_cache_10000_e3da0b26.parquet

[!] 发现已存在的特征缓存: feature_cache_10000_e3da0b26.parquet
    如果你修改了特征工程代码(apply_technical_indicators)，请选择 'n' 以重新计算。
    是否加载此缓存? [y/n] (默认 y): [I 2025-12-02 17:46:57,655] A new study created in RDB with name: catboost_stock_3class_v16
[I 2025-12-02 17:52:08,876] Trial 0 finished with value: 0.46275724949277497 and parameters: {'vol_multiplier': 0.9238272093836737, 'iterations': 1512, 'learning_rate': 0.07722472905585337, 'depth': 10, 'subsample': 0.6486201469621393, 'l2_leaf_reg': 0.040977137578110695, 'min_data_in_leaf': 78}. Best is trial 0 with value: 0.46275724949277497.
[I 2025-12-02 17:53:24,796] Trial 1 finished with value: 0.3188348589687092 and parameters: {'vol_multiplier': 0.7721399083570273, 'iterations': 1615, 'learning_rate': 0.07732268641367387, 'depth': 11, 'subsample': 0.6543839970757751, 'l2_leaf_reg': 5.307773121107929e-08, 'min_data_in_leaf': 26}. Best is trial 0 with value: 0.46275724949277497.
2025-12-02 17:53:38,499 - ERROR - 试验 2: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 17:53:38,528] Trial 2 finished with value: 0.0 and parameters: {'vol_multiplier': 0.8992699871919125, 'iterations': 1794, 'learning_rate': 0.06176980506448357, 'depth': 10, 'subsample': 0.6299815141116981, 'l2_leaf_reg': 0.0002912404937643964, 'min_data_in_leaf': 91}. Best is trial 0 with value: 0.46275724949277497.
2025-12-02 17:53:53,610 - ERROR - 试验 3: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 17:53:53,642] Trial 3 finished with value: 0.0 and parameters: {'vol_multiplier': 0.8595578140236733, 'iterations': 1619, 'learning_rate': 0.08686839139916118, 'depth': 10, 'subsample': 0.6521358415104076, 'l2_leaf_reg': 0.0010854680204598654, 'min_data_in_leaf': 19}. Best is trial 0 with value: 0.46275724949277497.
2025-12-02 17:54:25,234 - ERROR - 试验 4: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 17:54:25,284] Trial 4 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9490768350390928, 'iterations': 1746, 'learning_rate': 0.07229784199501077, 'depth': 11, 'subsample': 0.8883867250512023, 'l2_leaf_reg': 1.2488299543318933e-08, 'min_data_in_leaf': 47}. Best is trial 0 with value: 0.46275724949277497.
[I 2025-12-02 17:58:23,444] Trial 5 finished with value: 0.4628148522012341 and parameters: {'vol_multiplier': 0.9219820992117256, 'iterations': 1636, 'learning_rate': 0.08113291631197306, 'depth': 9, 'subsample': 0.6010223283984873, 'l2_leaf_reg': 0.013462841098395342, 'min_data_in_leaf': 67}. Best is trial 5 with value: 0.4628148522012341.
2025-12-02 17:58:40,644 - ERROR - 试验 6: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 17:58:40,668] Trial 6 finished with value: 0.0 and parameters: {'vol_multiplier': 0.8677031084325755, 'iterations': 1570, 'learning_rate': 0.0741925866538332, 'depth': 11, 'subsample': 0.646819665442339, 'l2_leaf_reg': 0.0003938665920926657, 'min_data_in_leaf': 19}. Best is trial 5 with value: 0.4628148522012341.
2025-12-02 17:58:52,356 - ERROR - 试验 7: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 17:58:52,380] Trial 7 finished with value: 0.0 and parameters: {'vol_multiplier': 0.8611000183817876, 'iterations': 1683, 'learning_rate': 0.0888543395260754, 'depth': 9, 'subsample': 0.6584792412966045, 'l2_leaf_reg': 0.00017705043497719044, 'min_data_in_leaf': 53}. Best is trial 5 with value: 0.4628148522012341.
2025-12-02 17:59:05,559 - ERROR - 试验 8: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 17:59:05,582] Trial 8 finished with value: 0.0 and parameters: {'vol_multiplier': 0.8837942569436446, 'iterations': 1444, 'learning_rate': 0.0658788461920254, 'depth': 10, 'subsample': 0.6219004785025051, 'l2_leaf_reg': 1.827831039825988e-05, 'min_data_in_leaf': 59}. Best is trial 5 with value: 0.4628148522012341.
2025-12-02 17:59:19,186 - ERROR - 试验 9: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 17:59:19,208] Trial 9 finished with value: 0.0 and parameters: {'vol_multiplier': 0.8645214511464092, 'iterations': 1726, 'learning_rate': 0.07125191251202292, 'depth': 10, 'subsample': 0.850000980858364, 'l2_leaf_reg': 6.849194673116814e-05, 'min_data_in_leaf': 57}. Best is trial 5 with value: 0.4628148522012341.
[I 2025-12-02 18:03:03,708] Trial 10 finished with value: 0.4623442647679327 and parameters: {'vol_multiplier': 0.996159830119754, 'iterations': 1419, 'learning_rate': 0.0962234784801139, 'depth': 9, 'subsample': 0.7474956834349039, 'l2_leaf_reg': 5.742346817019944, 'min_data_in_leaf': 98}. Best is trial 5 with value: 0.4628148522012341.
2025-12-02 18:08:36,655 - ERROR - 试验 11: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 18:08:36,699] Trial 11 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9351861427151534, 'iterations': 1521, 'learning_rate': 0.08298438193737365, 'depth': 9, 'subsample': 0.7218237231556393, 'l2_leaf_reg': 0.08433162042074692, 'min_data_in_leaf': 78}. Best is trial 5 with value: 0.4628148522012341.
[I 2025-12-02 18:12:35,237] Trial 12 finished with value: 0.4627414447228539 and parameters: {'vol_multiplier': 0.9335797634162507, 'iterations': 1503, 'learning_rate': 0.08080542742410271, 'depth': 9, 'subsample': 0.7038588991614845, 'l2_leaf_reg': 0.06706903525388816, 'min_data_in_leaf': 77}. Best is trial 5 with value: 0.4628148522012341.
2025-12-02 18:16:34,890 - ERROR - 试验 13: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 18:16:34,925] Trial 13 finished with value: 0.0 and parameters: {'vol_multiplier': 0.8126602816082629, 'iterations': 1548, 'learning_rate': 0.09429727169925908, 'depth': 9, 'subsample': 0.8006997317359156, 'l2_leaf_reg': 0.05862773806727472, 'min_data_in_leaf': 73}. Best is trial 5 with value: 0.4628148522012341.
[I 2025-12-02 18:22:26,547] Trial 14 finished with value: 0.4634458886814046 and parameters: {'vol_multiplier': 0.9840728455699469, 'iterations': 1657, 'learning_rate': 0.06789538178265621, 'depth': 10, 'subsample': 0.6007595323850936, 'l2_leaf_reg': 3.298173652349788, 'min_data_in_leaf': 68}. Best is trial 14 with value: 0.4634458886814046.
[I 2025-12-02 18:28:11,197] Trial 15 finished with value: 0.4635982906063994 and parameters: {'vol_multiplier': 0.9981432427917126, 'iterations': 1659, 'learning_rate': 0.06597609048773395, 'depth': 10, 'subsample': 0.6077789862855298, 'l2_leaf_reg': 9.019033449432978, 'min_data_in_leaf': 39}. Best is trial 15 with value: 0.4635982906063994.
[I 2025-12-02 18:34:10,846] Trial 16 finished with value: 0.4635613188357222 and parameters: {'vol_multiplier': 0.9995332204287052, 'iterations': 1677, 'learning_rate': 0.0675061181664509, 'depth': 10, 'subsample': 0.7006134545411983, 'l2_leaf_reg': 2.5350433951762747, 'min_data_in_leaf': 38}. Best is trial 15 with value: 0.4635982906063994.
[I 2025-12-02 18:41:57,983] Trial 17 finished with value: 0.4632049504691416 and parameters: {'vol_multiplier': 0.9698157036803036, 'iterations': 1700, 'learning_rate': 0.06412335957410992, 'depth': 11, 'subsample': 0.6893440857311267, 'l2_leaf_reg': 0.7605784261009817, 'min_data_in_leaf': 37}. Best is trial 15 with value: 0.4635982906063994.
2025-12-02 18:42:11,591 - ERROR - 试验 18: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 18:42:11,613] Trial 18 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9999566553796397, 'iterations': 1776, 'learning_rate': 0.060446937686781055, 'depth': 10, 'subsample': 0.7870947067141334, 'l2_leaf_reg': 2.6530954124155988e-06, 'min_data_in_leaf': 37}. Best is trial 15 with value: 0.4635982906063994.
[I 2025-12-02 18:47:47,534] Trial 19 finished with value: 0.46321294742697794 and parameters: {'vol_multiplier': 0.9654256023477077, 'iterations': 1673, 'learning_rate': 0.06812984613424959, 'depth': 10, 'subsample': 0.6843513757269758, 'l2_leaf_reg': 0.5811052223509434, 'min_data_in_leaf': 35}. Best is trial 15 with value: 0.4635982906063994.
[I 2025-12-02 18:55:49,468] Trial 20 finished with value: 0.4629680886202292 and parameters: {'vol_multiplier': 0.9669592862509333, 'iterations': 1584, 'learning_rate': 0.0636338758302332, 'depth': 11, 'subsample': 0.7807118668256497, 'l2_leaf_reg': 0.6761865153782858, 'min_data_in_leaf': 12}. Best is trial 15 with value: 0.4635982906063994.
[I 2025-12-02 19:03:24,852] Trial 21 finished with value: 0.46329857211981257 and parameters: {'vol_multiplier': 0.9928780614886353, 'iterations': 1651, 'learning_rate': 0.06887990736564534, 'depth': 10, 'subsample': 0.6070039447150853, 'l2_leaf_reg': 9.758493739074332, 'min_data_in_leaf': 45}. Best is trial 15 with value: 0.4635982906063994.
[I 2025-12-02 19:09:37,608] Trial 22 finished with value: 0.4640748255047752 and parameters: {'vol_multiplier': 0.9764246830070772, 'iterations': 1720, 'learning_rate': 0.06734856937489202, 'depth': 10, 'subsample': 0.7350775529941019, 'l2_leaf_reg': 2.2234771945020784, 'min_data_in_leaf': 31}. Best is trial 22 with value: 0.4640748255047752.
[I 2025-12-02 19:15:40,181] Trial 23 finished with value: 0.46392209064713397 and parameters: {'vol_multiplier': 0.9613692733842056, 'iterations': 1711, 'learning_rate': 0.06531908866026195, 'depth': 10, 'subsample': 0.7261752550559614, 'l2_leaf_reg': 1.0776005620636795, 'min_data_in_leaf': 32}. Best is trial 22 with value: 0.4640748255047752.
2025-12-02 19:22:02,300 - ERROR - 试验 24: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 19:22:02,350] Trial 24 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9546237846967638, 'iterations': 1728, 'learning_rate': 0.06366536212974193, 'depth': 10, 'subsample': 0.7459275255750604, 'l2_leaf_reg': 0.004394351505465773, 'min_data_in_leaf': 30}. Best is trial 22 with value: 0.4640748255047752.
2025-12-02 19:25:51,807 - ERROR - 试验 25: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 19:25:51,831] Trial 25 finished with value: 0.0 and parameters: {'vol_multiplier': 0.8330918434297274, 'iterations': 1758, 'learning_rate': 0.07136533246306824, 'depth': 10, 'subsample': 0.8301897422883217, 'l2_leaf_reg': 0.3474711629750746, 'min_data_in_leaf': 25}. Best is trial 22 with value: 0.4640748255047752.
2025-12-02 19:29:32,952 - ERROR - 试验 26: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 19:29:32,980] Trial 26 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9046779565509234, 'iterations': 1706, 'learning_rate': 0.07461326489531415, 'depth': 10, 'subsample': 0.7259790850138594, 'l2_leaf_reg': 0.004735375695749516, 'min_data_in_leaf': 46}. Best is trial 22 with value: 0.4640748255047752.
2025-12-02 19:38:24,511 - ERROR - 试验 27: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 19:38:24,539] Trial 27 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9786317190442171, 'iterations': 1734, 'learning_rate': 0.0653935732594047, 'depth': 11, 'subsample': 0.7686743469654379, 'l2_leaf_reg': 0.25540504113921325, 'min_data_in_leaf': 13}. Best is trial 22 with value: 0.4640748255047752.
[I 2025-12-02 19:45:12,065] Trial 28 finished with value: 0.464821183288043 and parameters: {'vol_multiplier': 0.9539797473969331, 'iterations': 1701, 'learning_rate': 0.06139894436856565, 'depth': 10, 'subsample': 0.8222781151739932, 'l2_leaf_reg': 1.7770217194656925, 'min_data_in_leaf': 29}. Best is trial 28 with value: 0.464821183288043.
2025-12-02 19:52:14,148 - ERROR - 试验 29: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 19:52:14,179] Trial 29 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9203438735088829, 'iterations': 1762, 'learning_rate': 0.06093048946180408, 'depth': 10, 'subsample': 0.8183781778053555, 'l2_leaf_reg': 0.012598882215158461, 'min_data_in_leaf': 29}. Best is trial 28 with value: 0.464821183288043.
[I 2025-12-02 19:58:41,161] Trial 30 finished with value: 0.46469755761660053 and parameters: {'vol_multiplier': 0.9502218417278303, 'iterations': 1709, 'learning_rate': 0.06264364134238978, 'depth': 10, 'subsample': 0.7625083402559844, 'l2_leaf_reg': 1.5560182761216486, 'min_data_in_leaf': 17}. Best is trial 28 with value: 0.464821183288043.
2025-12-02 20:06:11,484 - ERROR - 试验 31: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 20:06:11,530] Trial 31 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9486625259800142, 'iterations': 1702, 'learning_rate': 0.06212798121376431, 'depth': 10, 'subsample': 0.7604531703351288, 'l2_leaf_reg': 1.5630995630661475, 'min_data_in_leaf': 20}. Best is trial 28 with value: 0.464821183288043.
2025-12-02 20:10:10,056 - ERROR - 试验 32: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 20:10:10,082] Trial 32 finished with value: 0.0 and parameters: {'vol_multiplier': 0.7544142764965308, 'iterations': 1789, 'learning_rate': 0.06266249509630112, 'depth': 10, 'subsample': 0.7304011500283093, 'l2_leaf_reg': 0.09733442053196001, 'min_data_in_leaf': 24}. Best is trial 28 with value: 0.464821183288043.
2025-12-02 20:10:24,256 - ERROR - 试验 33: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 20:10:24,282] Trial 33 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9078392082277987, 'iterations': 1696, 'learning_rate': 0.061017285465429914, 'depth': 10, 'subsample': 0.8621820525240315, 'l2_leaf_reg': 7.169589474738444e-07, 'min_data_in_leaf': 10}. Best is trial 28 with value: 0.464821183288043.
[I 2025-12-02 20:16:16,018] Trial 34 finished with value: 0.4636559688083365 and parameters: {'vol_multiplier': 0.9536640352551979, 'iterations': 1619, 'learning_rate': 0.060215680420920334, 'depth': 10, 'subsample': 0.8073000199889669, 'l2_leaf_reg': 0.20457510943576931, 'min_data_in_leaf': 32}. Best is trial 28 with value: 0.464821183288043.
2025-12-02 20:24:59,181 - ERROR - 试验 35: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 20:24:59,221] Trial 35 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9401713801899996, 'iterations': 1719, 'learning_rate': 0.06504964361753522, 'depth': 11, 'subsample': 0.895849144336744, 'l2_leaf_reg': 2.00839841272367, 'min_data_in_leaf': 17}. Best is trial 28 with value: 0.464821183288043.
[I 2025-12-02 20:31:13,743] Trial 36 finished with value: 0.46406302291921786 and parameters: {'vol_multiplier': 0.9737791469623097, 'iterations': 1764, 'learning_rate': 0.06992266791950531, 'depth': 10, 'subsample': 0.7754862653171154, 'l2_leaf_reg': 0.976854926085513, 'min_data_in_leaf': 25}. Best is trial 28 with value: 0.464821183288043.
2025-12-02 20:35:12,998 - ERROR - 试验 37: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    raise optuna.TrialPruned()
optuna.exceptions.TrialPruned
[I 2025-12-02 20:35:13,023] Trial 37 finished with value: 0.0 and parameters: {'vol_multiplier': 0.8843988276536873, 'iterations': 1799, 'learning_rate': 0.0698434069286613, 'depth': 11, 'subsample': 0.8414282959217436, 'l2_leaf_reg': 0.011085256906518187, 'min_data_in_leaf': 16}. Best is trial 28 with value: 0.464821183288043.
✓ 正在加载缓存...
✓ 从缓存加载数据完成。形状: (2701135, 73)

--- 步骤 5: 处理后的总数据表已准备就绪 ---
最终数据形状: (2701135, 73)

*** 数据准备完成。耗时: 2.23 秒。 ***


--- 启动 Optuna 寻优单元 (CatBoost CPU/GPU 自动适配版) ---
Optuna 寻优：文件将保存到: /home/jin/work/optuna_results/run_20251202_174653
使用 64 个数值特征进行训练。
开始 Optuna 寻优 (目标 200 次)...

============================================================
【试验 1】 开始优化试验
============================================================
[✓ 试验 1 完成] F1=0.4679 | 平衡度=0.9889 | 得分=0.4628 | 耗时 311.1s

============================================================
【试验 2】 开始优化试验
============================================================
[✓ 试验 2 完成] F1=0.3602 | 平衡度=0.8853 | 得分=0.3188 | 耗时 28.9s

============================================================
【试验 3】 开始优化试验
============================================================

============================================================
【试验 4】 开始优化试验
============================================================

============================================================
【试验 5】 开始优化试验
============================================================

============================================================
【试验 6】 开始优化试验
============================================================
[✓ 试验 6 完成] F1=0.4679 | 平衡度=0.9892 | 得分=0.4628 | 耗时 238.1s

============================================================
【试验 7】 开始优化试验
============================================================

============================================================
【试验 8】 开始优化试验
============================================================

============================================================
【试验 9】 开始优化试验
============================================================

============================================================
【试验 10】 开始优化试验
============================================================

============================================================
【试验 11】 开始优化试验
============================================================
[✓ 试验 11 完成] F1=0.4712 | 平衡度=0.9813 | 得分=0.4623 | 耗时 224.4s

============================================================
【试验 12】 开始优化试验
============================================================

============================================================
【试验 13】 开始优化试验
============================================================
[✓ 试验 13 完成] F1=0.4684 | 平衡度=0.9878 | 得分=0.4627 | 耗时 238.5s

============================================================
【试验 14】 开始优化试验
============================================================

============================================================
【试验 15】 开始优化试验
============================================================
[✓ 试验 15 完成] F1=0.4717 | 平衡度=0.9824 | 得分=0.4634 | 耗时 351.6s

============================================================
【试验 16】 开始优化试验
============================================================
[✓ 试验 16 完成] F1=0.4725 | 平衡度=0.9811 | 得分=0.4636 | 耗时 344.6s

============================================================
【试验 17】 开始优化试验
============================================================
[✓ 试验 17 完成] F1=0.4726 | 平衡度=0.9809 | 得分=0.4636 | 耗时 359.6s

============================================================
【试验 18】 开始优化试验
============================================================
[✓ 试验 18 完成] F1=0.4708 | 平衡度=0.9839 | 得分=0.4632 | 耗时 467.1s

============================================================
【试验 19】 开始优化试验
============================================================

============================================================
【试验 20】 开始优化试验
============================================================
[✓ 试验 20 完成] F1=0.4706 | 平衡度=0.9843 | 得分=0.4632 | 耗时 335.9s

============================================================
【试验 21】 开始优化试验
============================================================
[✓ 试验 21 完成] F1=0.4704 | 平衡度=0.9842 | 得分=0.4630 | 耗时 481.9s

============================================================
【试验 22】 开始优化试验
============================================================
[✓ 试验 22 完成] F1=0.4720 | 平衡度=0.9816 | 得分=0.4633 | 耗时 343.3s

============================================================
【试验 23】 开始优化试验
============================================================
[✓ 试验 23 完成] F1=0.4720 | 平衡度=0.9832 | 得分=0.4641 | 耗时 372.7s

============================================================
【试验 24】 开始优化试验
============================================================
[✓ 试验 24 完成] F1=0.4711 | 平衡度=0.9848 | 得分=0.4639 | 耗时 362.5s

============================================================
【试验 25】 开始优化试验
============================================================

============================================================
【试验 26】 开始优化试验
============================================================

============================================================
【试验 27】 开始优化试验
============================================================

============================================================
【试验 28】 开始优化试验
============================================================

============================================================
【试验 29】 开始优化试验
============================================================
[✓ 试验 29 完成] F1=0.4716 | 平衡度=0.9856 | 得分=0.4648 | 耗时 407.5s

============================================================
【试验 30】 开始优化试验
============================================================

============================================================
【试验 31】 开始优化试验
============================================================
[✓ 试验 31 完成] F1=0.4713 | 平衡度=0.9860 | 得分=0.4647 | 耗时 386.9s

============================================================
【试验 32】 开始优化试验
============================================================

============================================================
【试验 33】 开始优化试验
============================================================

============================================================
【试验 34】 开始优化试验
============================================================

============================================================
【试验 35】 开始优化试验
============================================================
[✓ 试验 35 完成] F1=0.4704 | 平衡度=0.9856 | 得分=0.4637 | 耗时 351.7s

============================================================
【试验 36】 开始优化试验
============================================================

============================================================
【试验 37】 开始优化试验
============================================================
[✓ 试验 37 完成] F1=0.4719 | 平衡度=0.9835 | 得分=0.4641 | 耗时 374.5s

============================================================
【试验 38】 开始优化试验
============================================================

============================================================
【试验 39】 开始优化试验
============================================================
[I 2025-12-02 20:39:56,216] Trial 38 finished with value: 0.46250717829582316 and parameters: {'vol_multiplier': 0.9791377458549764, 'iterations': 1753, 'learning_rate': 0.07460233579132967, 'depth': 9, 'subsample': 0.7921613232556903, 'l2_leaf_reg': 0.14006467811279888, 'min_data_in_leaf': 23}. Best is trial 28 with value: 0.464821183288043.
2025-12-02 20:42:44,003 - ERROR - 试验 39: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    if trial.should_prune():
        ^^^^^^^^^^^^^^^^^^^^^
optuna.exceptions.TrialPruned
[I 2025-12-02 20:42:44,032] Trial 39 finished with value: 0.0 and parameters: {'vol_multiplier': 0.9285904195401108, 'iterations': 1777, 'learning_rate': 0.07856624855353571, 'depth': 10, 'subsample': 0.767025961098014, 'l2_leaf_reg': 0.035953977439168845, 'min_data_in_leaf': 43}. Best is trial 28 with value: 0.464821183288043.
2025-12-02 20:46:31,657 - ERROR - 试验 40: TimeSeriesSplit 或 CV 期间发生意外错误。
Traceback (most recent call last):
  File "/home/jin/work/training/模型训练.py", line 1040, in objective
    if trial.should_prune():
        ^^^^^^^^^^^^^^^^^^^^^
optuna.exceptions.TrialPruned
[I 2025-12-02 20:46:31,690] Trial 40 finished with value: 0.0 and parameters: {'vol_multiplier': 0.91482688442713, 'iterations': 1747, 'learning_rate': 0.07298889662091125, 'depth': 10, 'subsample': 0.8740339291507603, 'l2_leaf_reg': 3.5020156434418004, 'min_data_in_leaf': 52}. Best is trial 28 with value: 0.464821183288043.
[I 2025-12-02 20:52:57,735] Trial 41 finished with value: 0.46358694800111244 and parameters: {'vol_multiplier': 0.9601087138852187, 'iterations': 1635, 'learning_rate': 0.06653017090103909, 'depth': 10, 'subsample': 0.7382953989705779, 'l2_leaf_reg': 0.4651613829737422, 'min_data_in_leaf': 27}. Best is trial 28 with value: 0.464821183288043.
2025-12-02 21:58:09,371 - [RecursiveOptimizer] - INFO - Initiating Recursive Optimization Loop: Cycle 1
2025-12-02 21:58:09,371 - [RecursiveOptimizer] - INFO - === Starting Cycle 1 (Resume=True) ===
2025-12-02 21:58:09,371 - [RecursiveOptimizer] - INFO - Executing: export PYTHONPATH=$PYTHONPATH:$(pwd)/shared && /home/jin/work/.venv/bin/python training/模型训练.py --mode c --use-cache y
2025-12-02 21:58:09,404 - [RecursiveOptimizer] - ERROR - Training script exited with error.
2025-12-02 21:58:09,404 - [RecursiveOptimizer] - ERROR - Training failed. Aborting loop.
2025-12-02 21:59:40,168 - [RecursiveOptimizer] - INFO - Initiating Recursive Optimization Loop: Cycle 1
2025-12-02 21:59:40,168 - [RecursiveOptimizer] - INFO - === Starting Cycle 1 (Resume=True) ===
2025-12-02 21:59:40,168 - [RecursiveOptimizer] - INFO - Executing: export PYTHONPATH=$PYTHONPATH:$(pwd)/shared && /home/jin/work/.venv/bin/python -c "import sys,runpy; sys.argv=['training/模型训练.py', '--mode', 'c', '--use-cache', 'y']; runpy.run_path('training/模型训练.py', run_name='__main__')"
2025-12-02 21:59:40,217 - [RecursiveOptimizer] - ERROR - Training script exited with error.
2025-12-02 21:59:40,217 - [RecursiveOptimizer] - ERROR - Training failed. Aborting loop.
2025-12-02 22:00:07,367 - [RecursiveOptimizer] - INFO - Initiating Recursive Optimization Loop: Cycle 1
2025-12-02 22:00:07,367 - [RecursiveOptimizer] - INFO - === Starting Cycle 1 (Resume=True) ===
2025-12-02 22:00:07,367 - [RecursiveOptimizer] - INFO - Executing: export PYTHONPATH=$PYTHONPATH:$(pwd)/shared && /home/jin/work/.venv/bin/python -c "import sys,runpy; sys.argv=['training/模型训练.py', '--mode', 'c', '--use-cache', 'y']; runpy.run_path('training/模型训练.py', run_name='__main__')"
2025-12-02 22:00:07,415 - [RecursiveOptimizer] - ERROR - Training script exited with error.
2025-12-02 22:00:07,415 - [RecursiveOptimizer] - ERROR - Training failed. Aborting loop.
2025-12-02 22:01:32,481 - [RecursiveOptimizer] - INFO - Initiating Recursive Optimization Loop: Cycle 1
2025-12-02 22:01:32,481 - [RecursiveOptimizer] - INFO - === Starting Cycle 1 (Resume=True) ===
2025-12-02 22:01:32,482 - [RecursiveOptimizer] - INFO - Executing: export PYTHONPATH=$PYTHONPATH:$(pwd)/shared && /home/jin/work/.venv/bin/python training/run_training.py --mode c --use-cache y
2025-12-02 22:01:32,531 - [RecursiveOptimizer] - ERROR - Training script exited with error.
2025-12-02 22:01:32,531 - [RecursiveOptimizer] - ERROR - Training failed. Aborting loop.
2025-12-02 22:02:34,167 - [RecursiveOptimizer] - INFO - Initiating Recursive Optimization Loop: Cycle 1
2025-12-02 22:02:34,167 - [RecursiveOptimizer] - INFO - === Starting Cycle 1 (Resume=True) ===
2025-12-02 22:02:34,168 - [RecursiveOptimizer] - INFO - Executing: export PYTHONPATH=$PYTHONPATH:$(pwd)/shared && /home/jin/work/.venv/bin/python training/run_training.py --mode c --use-cache y
2025-12-02 22:02:34,198 - [RecursiveOptimizer] - ERROR - Training script exited with error.
2025-12-02 22:02:34,198 - [RecursiveOptimizer] - ERROR - Training failed. Aborting loop.
2025-12-02 22:04:20,743 - [RecursiveOptimizer] - INFO - Initiating Recursive Optimization Loop: Cycle 1
2025-12-02 22:04:20,744 - [RecursiveOptimizer] - INFO - === Starting Cycle 1 (Resume=True) ===
2025-12-02 22:04:20,744 - [RecursiveOptimizer] - INFO - Executing: export PYTHONPATH=$PYTHONPATH:$(pwd)/shared && /home/jin/work/.venv/bin/python training/run_training.py --mode c --use-cache y
